<div class="w-full max-w-md p-2">
    <div class="flex flex-col items-center justify-center mb-6">
        <div
            class="w-12 h-12 bg-blue-600 rounded-xl shadow-lg shadow-blue-600/20 flex items-center justify-center text-white text-xl mb-6">
            <fa-icon [icon]="faKey" aria-hidden="true"></fa-icon>
        </div>

        <h1 appText="h1">¿Olvidaste tu contraseña?</h1>
        <p appText="body">No te preocupes, te ayudaremos a recuperarla</p>
    </div>

    @if (successMessage(); as msg) {
    <div role="alert" class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-start animate-fade-in">
        <fa-icon [icon]="faCheckCircle" class="text-green-600 mt-0.5 mr-3 flex-shrink-0" aria-hidden="true"></fa-icon>
        <div>
            <p class="text-sm text-green-800 font-semibold">Solicitud enviada</p>
            <p class="text-xs text-green-700 mt-1">{{ msg }}</p>
        </div>
    </div>
    }

    @if (errorMessage(); as err) {
    <div role="alert" class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start animate-fade-in">
        <fa-icon [icon]="faExclamationCircle" class="text-red-600 mt-0.5 mr-3 flex-shrink-0"
            aria-hidden="true"></fa-icon>
        <p class="text-sm text-red-800 font-medium">{{ err }}</p>
    </div>
    }

    <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="space-y-6">
        <div>
            <label appText="label" for="email">Correo electrónico</label>
            <app-input id="email" type="email" placeholder="ejemplo@email.com" [icon]="faEnvelope"
                formControlName="email" [control]="forgotPasswordForm.controls.email"
                [errors]="{ required: 'El correo es obligatorio.', email: 'Ingresa un correo válido.' }">
            </app-input>

            <p appText="caption" class="mt-3 gap-1.5 ">
                <fa-icon [icon]="faInfoCircle" class="text-slate-400" aria-hidden="true"></fa-icon>
                <span>Te enviaremos un enlace seguro a tu correo</span>
            </p>
        </div>

        <app-submit-button [variant]="'full'" [isLoading]="isLoading()" [isDisabled]="!isFormValid()"
            label="Enviar enlace de recuperación" loadingLabel="Enviando..." [icon]="faPaperPlane">
        </app-submit-button>
    </form>

    <div class="text-center mt-5">
        <a routerLink="/auth/login" appText="link" class="inline-flex items-center gap-2 text-sm">
            <fa-icon [icon]="faArrowLeft" aria-hidden="true" class="text-xs"></fa-icon>
            Volver al inicio de sesión
        </a>
    </div>

    <p class="mt-7" appText="caption">
        Panel de Denuncias — Administración
    </p>
</div>
