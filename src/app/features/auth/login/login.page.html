<div class="max-w-md w-full">
    <div class="flex items-center justify-center mb-6">
        <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center text-white text-xl">
            <fa-icon [icon]="faUsers"></fa-icon>
        </div>
    </div>

    <h2 class="text-center text-2xl font-bold text-gray-800 mb-2">Bienvenido de nuevo</h2>
    <p class="text-center text-sm text-gray-500 mb-6">Inicia sesión en tu cuenta</p>

    @if (passwordChanged()) {
    <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg">
        <div class="flex items-start">
            <fa-icon [icon]="faCheckCircle" class="text-green-600 mt-0.5 mr-3"></fa-icon>
            <div>
                <p class="text-sm text-green-800 font-medium">Contraseña actualizada</p>
                <p class="text-xs text-green-700 mt-1">{{ mensaje() }}</p>
            </div>
        </div>
    </div>
    }

    @if (logout()) {
    <div class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-start">
        <fa-icon [icon]="faInfoCircle" class="text-blue-600 mt-0.5 mr-3"></fa-icon>
        <p class="text-sm text-blue-800">Has cerrado sesión correctamente.</p>
    </div>
    }

    @if (error()) {
    <div class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start">
        <fa-icon [icon]="faExclamationCircle" class="text-red-600 mt-0.5 mr-3"></fa-icon>
        <p class="text-sm text-red-800">Usuario o contraseña incorrectos.</p>
    </div>
    }

    <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="space-y-4" novalidate>

        <app-input id="login-email" formControlName="email" type="email" inputmode="email" autocomplete="username"
            placeholder="Correo electrónico" [icon]="faEnvelope" [maxlength]="254" [autofocus]="true"
            [control]="emailControl"
            [errors]="{ required: 'El correo es requerido', email: 'Ingresa un correo válido' }" />

        <app-input id="login-password" formControlName="password" type="password" autocomplete="current-password"
            placeholder="Contraseña" [icon]="faLock" [maxlength]="128" [control]="passwordControl"
            [errors]="{ required: 'La contraseña es requerida', minlength: 'Mínimo 12 caracteres' }" />

        <app-submit-button [variant]="'full'" [isLoading]="submitting()" [isDisabled]="loginForm.invalid"
            label="Iniciar sesión" loadingLabel="Iniciando..." [icon]="faArrowRight">
        </app-submit-button>

        <div class="text-center text-sm pt-2">
            <a routerLink="/auth/forgot-password"
                class="text-blue-600 hover:text-blue-800 font-medium cursor-pointer hover:underline flex items-center justify-center transition-colors">
                <fa-icon [icon]="faKey" class="mr-1.5"></fa-icon>
                ¿Olvidaste tu contraseña?
            </a>
        </div>

        <div class="text-center text-sm text-gray-600">
            ¿No tienes cuenta?
            <a routerLink="/auth/register"
                class="text-blue-600 font-medium cursor-pointer hover:text-blue-800 hover:underline transition-colors">
                Crear cuenta
            </a>
        </div>

        <div id="login-message" class="text-center text-sm mt-2" aria-live="polite"></div>
    </form>
    <p class="text-center text-xs text-gray-400 mt-6">Panel de Denuncias — Administración</p>
</div>
