<div class="w-full max-w-md p-2">

    <div class="flex flex-col items-center justify-center mb-6">
        <div
            class="w-12 h-12 bg-blue-600 rounded-xl shadow-lg shadow-blue-600/20 flex items-center justify-center text-white text-xl mb-6">
            <fa-icon [icon]="faUserPlus" aria-hidden="true"></fa-icon>
        </div>

        <h1 appText="h1">Crear una cuenta</h1>
        <p appText="body">Registra una nueva cuenta de usuario</p>
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="space-y-5">
        <div>
            <label appText="label" for="reg-name">Nombre completo</label>
            <app-input id="reg-name" formControlName="nombre" type="text" autocomplete="name"
                placeholder="Ej. Juan Pérez" [icon]="faUser" [control]="nombreControl"
                [errors]="{ required: 'El nombre es obligatorio.', minlength: 'Mínimo 2 caracteres.' }" />
        </div>

        <div>
            <label appText="label" for="reg-email">Correo electrónico</label>
            <app-input id="reg-email" formControlName="email" type="email" autocomplete="email" inputmode="email"
                placeholder="ejemplo@correo.com" [icon]="faEnvelope" [control]="emailControl"
                [errors]="{ required: 'El correo es obligatorio.', email: 'Formato de correo inválido.' }" />
        </div>

        <div>
            <label appText="label" for="reg-password">Contraseña</label>
            <app-input id="reg-password" formControlName="password" type="password" autocomplete="new-password"
                placeholder="••••••••••••••" [icon]="faLock" [control]="passwordControl"
                [errors]="{ required: 'La contraseña es obligatoria.', minlength: 'Mínimo 8 caracteres.' }" />
        </div>

        @if (message(); as msg) {
        <div role="alert" class="p-4 rounded-lg border text-sm flex items-start animate-fade-in" [ngClass]="{
                'bg-green-50 border-green-200 text-green-800': messageClass() === 'success',
                'bg-red-50 border-red-200 text-red-800': messageClass() === 'error',
                'bg-blue-50 border-blue-200 text-blue-800': messageClass() === 'info'
             }">

            <fa-icon [icon]="
                messageClass() === 'success' ? faCheckCircle : 
                messageClass() === 'error' ? faExclamationCircle : faInfoCircle
            " class="mt-0.5 mr-3 flex-shrink-0" aria-hidden="true"></fa-icon>

            <span>{{ msg }}</span>
        </div>
        }

        <app-submit-button [variant]="'full'" [isLoading]="submitting()" [isDisabled]="!isFormValid"
            label="Crear cuenta" loadingLabel="Creando cuenta..." [icon]="faUserPlus">
        </app-submit-button>


        <div class="text-center">
            <span appText="body-link">¿Ya tienes cuenta?</span>
            <a routerLink="/auth/login" appText="link">
                Iniciar sesión
            </a>
        </div>
    </form>

    <p class="mt-7" appText="caption">
        Team List Dashboard — Administración
    </p>
</div>
