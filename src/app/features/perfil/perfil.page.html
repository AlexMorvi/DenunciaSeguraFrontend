<!-- <div class="container mx-auto p-4 md:p-8">
    @if (currentUser(); as user) {
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-md overflow-hidden">
        <div class="p-6">
            <h1 class="text-2xl font-bold text-gray-800 mb-4">Mi Perfil</h1>

            <div class="space-y-4">
                @if (user.nombre) {
                <div class="flex items-center">
                    <span class="font-semibold w-48">Nombre:</span>
                    <span class="text-gray-700">{{ user.nombre }}</span>
                </div>
                }
                <div class="flex items-center">
                    <span class="font-semibold w-48">Email:</span>
                    <span class="text-gray-700">{{ user.email }}</span>
                </div>
                <div class="flex items-center">
                    <span class="font-semibold w-48">Rol:</span>
                    <span class="text-gray-700">{{ user.rol }}</span>
                </div>
                @if (isCitizen() && user.publicCitizenId) {
                <div class="flex items-center">
                    <span class="font-semibold w-48">Identificador Público:</span>
                    <span class="text-gray-700">{{ user.publicCitizenId }}</span>
                </div>
                } @else if (!isCitizen() && user.aliasPublico) {
                <div class="flex items-center">
                    <span class="font-semibold w-48">Alias Público:</span>
                    <span class="text-gray-700">{{ user.aliasPublico }}</span>
                </div>
                }
                @if (user.entidad) {
                <div class="flex items-center">
                    <span class="font-semibold w-48">Entidad:</span>
                    <span class="text-gray-700">{{ user.entidad }}</span>
                </div>
                }
            </div>

            <hr class="my-6" />

            <h2 class="text-xl font-semibold text-gray-800 mb-4">
                @if (isCitizen()) {
                Actualizar Identificador Público
                } @else {
                Actualizar Alias Público
                }
            </h2>

            <form (ngSubmit)="updateAlias()" class="space-y-6">
                <app-input [id]="'alias'" [label]="isCitizen() ? 'Identificador Público' : 'Alias Público'"
                    [control]="aliasControl"
                    [placeholder]="isCitizen() ? 'Tu identificador público' : 'Tu alias para el sistema'" [errors]="{
                    required: 'Este campo es requerido.',
                    minlength: 'Debe tener al menos 3 caracteres.',
                    maxlength: 'No puede exceder los 50 caracteres.'
                    }"></app-input>

                <app-submit-button label="Actualizar" [isLoading]="loading()"
                    [isDisabled]="aliasControl.invalid || loading()">
                </app-submit-button>
            </form>
        </div>
    </div>
    } @else {
    <p class="text-center text-gray-500">Cargando perfil...</p>
    }
</div> -->


<div class="container mx-auto p-4 md:p-8">
    @if (currentUser(); as user) {
    <section class="max-w-2xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden border border-slate-100">

        <div class="p-6 md:p-8">
            <header class="mb-6">
                <h1 class="text-2xl font-bold text-slate-900">Mi Perfil</h1>
                <p class="text-sm text-slate-500 mt-1">Administra tu información personal y configuración pública.</p>
            </header>

            <dl class="divide-y divide-slate-100 text-sm">

                @if (user.nombre) {
                <div class="py-3 sm:grid sm:grid-cols-3 sm:gap-4">
                    <dt class="font-medium text-slate-900">Nombre</dt>
                    <dd class="text-slate-700 sm:col-span-2 mt-1 sm:mt-0">{{ user.nombre }}</dd>
                </div>
                }

                <div class="py-3 sm:grid sm:grid-cols-3 sm:gap-4">
                    <dt class="font-medium text-slate-900">Email</dt>
                    <dd class="text-slate-700 sm:col-span-2 mt-1 sm:mt-0 break-all">{{ user.email }}</dd>
                </div>

                <div class="py-3 sm:grid sm:grid-cols-3 sm:gap-4">
                    <dt class="font-medium text-slate-900">Rol</dt>
                    <dd class="text-slate-700 sm:col-span-2 mt-1 sm:mt-0">
                        <span
                            class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                            {{ user.rol }}
                        </span>
                    </dd>
                </div>

                @if (isCitizen()) {
                @if (user.publicCitizenId) {
                <div class="py-3 sm:grid sm:grid-cols-3 sm:gap-4">
                    <dt class="font-medium text-slate-900">Identificador Público</dt>
                    <dd class="text-slate-700 sm:col-span-2 mt-1 sm:mt-0 font-mono">{{ user.publicCitizenId }}</dd>
                </div>
                }
                } @else {
                @if (user.aliasPublico) {
                <div class="py-3 sm:grid sm:grid-cols-3 sm:gap-4">
                    <dt class="font-medium text-slate-900">Alias Público</dt>
                    <dd class="text-slate-700 sm:col-span-2 mt-1 sm:mt-0">{{ user.aliasPublico }}</dd>
                </div>
                }
                }

                @if (user.entidad) {
                <div class="py-3 sm:grid sm:grid-cols-3 sm:gap-4">
                    <dt class="font-medium text-slate-900">Entidad</dt>
                    <dd class="text-slate-700 sm:col-span-2 mt-1 sm:mt-0">{{ user.entidad }}</dd>
                </div>
                }
            </dl>

            <hr class="my-8 border-slate-200" />

            <div class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                <h2 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
                    </svg>
                    {{ isCitizen() ? 'Actualizar Identificador' : 'Actualizar Alias' }}
                </h2>

                <form [formGroup]="form" (ngSubmit)="updateAlias()" class="space-y-5">
                    <app-input id="alias" placeholder="Ingresa tu nuevo alias" [formControl]="form.controls.alias"
                        [maxlength]="50" [attr.aria-describedby]="'alias-help'">
                    </app-input>
                    <div class="mt-1 text-xs text-gray-500 flex items-center justify-between">
                        <div id="alias-help">Requerido. 3–50 caracteres.</div>
                        <div class="text-gray-400">{{ (form.get('alias')?.value?.length || 0) }}/50
                        </div>
                    </div>

                    <div class="flex justify-end">
                        <app-submit-button label="Guardar Cambios" [isLoading]="isLoading()"
                            [isDisabled]="form.invalid || isLoading() || form.pristine">
                        </app-submit-button>
                    </div>
                </form>
            </div>
        </div>
    </section>
    } @else {
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-md p-6 animate-pulse">
        <div class="h-8 bg-slate-200 rounded w-1/3 mb-6"></div>
        <div class="space-y-4">
            <div class="h-4 bg-slate-200 rounded w-full"></div>
            <div class="h-4 bg-slate-200 rounded w-5/6"></div>
            <div class="h-4 bg-slate-200 rounded w-4/6"></div>
        </div>
    </div>
    }
</div>
