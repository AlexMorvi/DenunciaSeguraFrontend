<div class="relative">

    @if (icon(); as iconValue) {
    <fa-icon [icon]="iconValue" [class]="iconClasses()">
    </fa-icon>
    }

    @if (!multiline()) {

    <input [id]="id()" [type]="inputType()" [placeholder]="placeholder()" [autocomplete]="autocomplete()"
        [attr.inputmode]="inputmode() || null" [attr.maxlength]="maxlength()" [attr.autofocus]="autofocus() || null"
        [value]="value()" [disabled]="disabled()" (input)="onInput($event)" (blur)="onBlur()"
        class="pr-4 py-2 border rounded-lg w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"
        [class]="icon() ? 'pl-10' : 'pl-4'" [class.pr-10]="canToggleVisibility()" [class.border-red-500]="hasError"
        [class.border-gray-300]="!hasError" />

    @if (canToggleVisibility()) {
    <button type="button" (click)="togglePasswordVisibility()"
        class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none"
        [attr.aria-label]="showPassword() ? 'Ocultar contraseña' : 'Mostrar contraseña'" tabindex="-1">
        <fa-icon [icon]="showPassword() ? faEyeSlash : faEye" class="text-base"></fa-icon>
    </button>
    }

    } @else {

    <textarea [id]="id()" [placeholder]="placeholder()" [attr.rows]="rows()" [attr.maxlength]="maxlength()"
        [value]="value()" [disabled]="disabled()" (input)="onInput($event)" (blur)="onBlur()"
        class="block w-full rounded-lg bg-gray-50 border py-3 px-4 text-sm resize-none placeholder-gray-400 transition-shadow"
        [class]="icon() ? 'pl-10' : 'pl-4'" [class.border-red-500]="hasError" [class.border-gray-200]="!hasError">
    </textarea>
    }

    @if (hasError) {
    <div class="text-red-500 text-xs mt-1">
        @for (message of errorMessages; track message) {
        <span class="block">{{ message }}</span>
        }
    </div>
    }

</div>
